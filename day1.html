<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>day1</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="title-section">
        <h1 id="day-title">day1</h1>
        <div class="title-buttons">
            <button onclick="renameDay()">تغییر نام</button>
            <button onclick="deleteDay()">حذف روز</button>
        </div>
    </div>
    <hr>
    <div class="container">
        <ul id="activity-list">
            <!-- لیست فعالیت‌ها اینجا اضافه می‌شود -->
        </ul>
        <div class="button-row">
            <button onclick="location.href='index.html'">بازگشت به صفحه اصلی</button>
            <button onclick="location.href='edit_workout.html?day=day1'">افزودن فعالیت</button>
        </div>
    </div>
    <script>
        const day = 'day1';
        const activityList = document.getElementById('activity-list');

        function loadActivities() {
            const activities = JSON.parse(localStorage.getItem(day)) || [];
            activityList.innerHTML = '';
            activities.forEach((activity, index) => {
                const li = document.createElement('li');
                li.textContent = activity;
                li.onclick = () => location.href = `edit_workout.html?day=${day}&index=${index}`;
                li.style.cursor = 'pointer';
                li.style.padding = '10px';
                li.style.border = '1px solid #ccc';
                li.style.marginBottom = '5px';
                li.style.borderRadius = '5px';
                li.style.backgroundColor = '#f9f9f9';
                li.style.textAlign = 'right';
                activityList.appendChild(li);
            });
        }

        function renameDay() {
            const newName = prompt('نام جدید را وارد کنید:', document.getElementById('day-title').textContent);
            if (newName) {
                document.getElementById('day-title').textContent = newName;
                updateDayNameInStorage(newName);
                updateDayNameInMainPage(newName);
            }
        }

        function deleteDay() {
            if (confirm('آیا مطمئن هستید که می‌خواهید این روز را حذف کنید؟')) {
                localStorage.removeItem(day);
                const days = JSON.parse(localStorage.getItem('days')) || [];
                const updatedDays = days.filter(d => d.number !== 1);
                localStorage.setItem('days', JSON.stringify(updatedDays));
                location.href = 'index.html';
            }
        }

        function updateDayNameInStorage(newName) {
            const days = JSON.parse(localStorage.getItem('days')) || [];
            const dayIndex = days.findIndex(d => d.number === 1);
            if (dayIndex !== -1) {
                days[dayIndex].name = newName;
                localStorage.setItem('days', JSON.stringify(days));
            }
        }

        function updateDayNameInMainPage(newName) {
            const days = JSON.parse(localStorage.getItem('days')) || [];
            const dayIndex = days.findIndex(d => d.number === 1);
            if (dayIndex !== -1) {
                days[dayIndex].name = newName;
                localStorage.setItem('days', JSON.stringify(days));
                window.opener.loadDays();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadActivities();
            if (sessionStorage.getItem('updated') === 'true') {
                sessionStorage.removeItem('updated');
                loadActivities();
            }
        });
    </script>
</body>
</html>